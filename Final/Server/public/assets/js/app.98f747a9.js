(function(t){function e(e){for(var s,a,o=e[0],c=e[1],u=e[2],h=0,d=[];h<o.length;h++)a=o[h],Object.prototype.hasOwnProperty.call(i,a)&&i[a]&&d.push(i[a][0]),i[a]=0;for(s in c)Object.prototype.hasOwnProperty.call(c,s)&&(t[s]=c[s]);l&&l(e);while(d.length)d.shift()();return r.push.apply(r,u||[]),n()}function n(){for(var t,e=0;e<r.length;e++){for(var n=r[e],s=!0,o=1;o<n.length;o++){var c=n[o];0!==i[c]&&(s=!1)}s&&(r.splice(e--,1),t=a(a.s=n[0]))}return t}var s={},i={app:0},r=[];function a(e){if(s[e])return s[e].exports;var n=s[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=t,a.c=s,a.d=function(t,e,n){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)a.d(n,s,function(e){return t[e]}.bind(null,s));return n},a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=e,o=o.slice();for(var u=0;u<o.length;u++)e(o[u]);var l=c;r.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("cd49")},"05d6":function(t,e,n){},"0f96":function(t,e,n){},1:function(t,e){},1325:function(t,e,n){"use strict";var s=n("93d1"),i=n.n(s);i.a},1954:function(t,e,n){"use strict";var s=n("9eac"),i=n.n(s);i.a},"1b57":function(t,e,n){t.exports=n.p+"assets/img/mongodb.973959d0.png"},"236e":function(t,e,n){"use strict";var s=n("05d6"),i=n.n(s);i.a},"255d":function(t,e,n){"use strict";var s=n("ebfb"),i=n.n(s);i.a},"2c26":function(t,e,n){"use strict";var s=n("6ae0"),i=n.n(s);i.a},"2f0b":function(t,e,n){},3063:function(t,e,n){},"31a8":function(t,e,n){},"414f":function(t,e,n){t.exports=n.p+"assets/img/node.c75dd449.png"},4822:function(t,e,n){t.exports=n.p+"assets/img/LogoGrey.1c5d03c7.png"},"587b":function(t,e,n){"use strict";var s=n("9931"),i=n.n(s);i.a},"5a2c":function(t,e,n){t.exports=n.p+"assets/img/compute.d5a8c61e.png"},"5f22":function(t,e,n){},"62f4":function(t,e,n){"use strict";var s=n("d918"),i=n.n(s);i.a},"654d":function(t,e,n){},"65a3":function(t,e,n){"use strict";var s=n("9c2a"),i=n.n(s);i.a},"6ae0":function(t,e,n){},"6e63":function(t,e,n){},"70c6":function(t,e,n){"use strict";var s=n("5f22"),i=n.n(s);i.a},7201:function(t,e,n){"use strict";var s=n("2f0b"),i=n.n(s);i.a},7207:function(t,e,n){t.exports=n.p+"assets/img/Info.4ebb5d9b.svg"},"73c2":function(t,e,n){t.exports=n.p+"assets/img/nginx.f81a3511.png"},"81b4":function(t,e,n){t.exports=n.p+"assets/img/MusicOff.35d757dd.svg"},"8ec6":function(t,e,n){"use strict";var s=n("c2af"),i=n.n(s);i.a},9325:function(t,e,n){t.exports=n.p+"assets/img/vue.4e8d28e1.png"},"93d1":function(t,e,n){},9931:function(t,e,n){},9993:function(t,e,n){"use strict";var s=n("c352"),i=n.n(s);i.a},"9c2a":function(t,e,n){},"9eac":function(t,e,n){},a2e2:function(t,e,n){t.exports=n.p+"assets/img/axios.ec27bcef.png"},aae8:function(t,e,n){"use strict";var s=n("654d"),i=n.n(s);i.a},b046:function(t,e,n){},b448:function(t,e,n){"use strict";var s=n("ceee"),i=n.n(s);i.a},b512:function(t,e,n){"use strict";var s=n("0f96"),i=n.n(s);i.a},bf86:function(t,e,n){},c2af:function(t,e,n){},c352:function(t,e,n){},c515:function(t,e,n){"use strict";var s=n("d548"),i=n.n(s);i.a},c92b:function(t,e,n){"use strict";var s=n("6e63"),i=n.n(s);i.a},cd49:function(t,e,n){"use strict";n.r(e);n("7f7f"),n("cadf"),n("551c"),n("f751"),n("097d");var s,i=n("2b0e"),r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("router-view"),n("AboutLink"),n("BackgroundMusic"),n("PlayerCount")],1)},a=[],o=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container",on:{click:function(e){return t.onClick()}}},[s("img",{attrs:{src:n("7207"),alt:"about"}})])},c=[],u={name:"AboutLink",methods:{onClick:function(){this.$router.push("/about")}}},l=u,h=(n("1325"),n("2877")),d=Object(h["a"])(l,o,c,!1,null,"3d2b76b5",null),p=d.exports,m=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container",on:{click:function(e){return t.onClick()}}},[s("img",{class:{hidden:t.isMuted},attrs:{src:n("e2d3"),alt:"Mute Catnip (c)"}}),s("img",{class:{hidden:!t.isMuted},attrs:{src:n("81b4"),alt:"Mute Catnip (c)"}}),s("audio",{ref:"music",attrs:{muted:"muted",autoplay:"",loop:"",src:"/Catnip.mp3",type:"audio/mp3"}})])},v=[],g={name:"BackgroundMusic",data:function(){return{isMuted:!1,music:null}},methods:{onClick:function(){this.isMuted=!this.isMuted,this.isMuted?this.$refs.music.pause():this.$refs.music.play()}},mounted:function(){}},b=g,x=(n("236e"),Object(h["a"])(b,m,v,!1,null,"45392646",null)),y=x.exports,C=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container"},[n("p",[t._v(t._s(t.count))])])},w=[],R=(n("96cf"),n("3b8d")),k=n("bc3a"),_=n.n(k),P={name:"PlayerCount",data:function(){return{count:0,refreshId:null}},mounted:function(){this.refreshId=setInterval(this.getPlayerCount.bind(this),5e3)},methods:{getPlayerCount:function(){var t=Object(R["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,_.a.get("/stats");case 3:e=t.sent,console.log("[PlayerCount] Got stats from fetch."),this.count=e.data.playerCount,t.next=12;break;case 8:t.prev=8,t.t0=t["catch"](0),console.log("[PlayerCount] Stats fetch failed."),this.stopRefresh();case 12:case"end":return t.stop()}}),t,this,[[0,8]])})));function e(){return t.apply(this,arguments)}return e}(),stopRefresh:function(){this.refreshId&&clearInterval(this.refreshId)}}},E=P,T=(n("8ec6"),Object(h["a"])(E,C,w,!1,null,"042948d5",null)),L=T.exports,M={components:{AboutLink:p,BackgroundMusic:y,PlayerCount:L}},I=M,z=(n("9993"),Object(h["a"])(I,r,a,!1,null,null,null)),O=z.exports,S=n("8c4f"),$=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"root"},[n("Parallax",{staticClass:"background"}),n("div",{staticClass:"box"},[n("AboutContent")],1)],1)},q=[],j=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container"},[n("canvas",{ref:"parallax-canvas"})])},A=[],F=(n("6c7b"),function(){function t(){this.x=Math.random(),this.y=Math.random(),this.speed=.003*Math.random()+1e-4}return t.prototype.offset=function(t,e){this.x=(this.x+this.speed*t)%1,this.y=(this.y+this.speed*e)%1,this.x<0&&(this.x+=1),this.y<0&&(this.y+=1)},t.prototype.render=function(t,e){t.moveTo(this.x*e,this.y*e),t.arc(this.x*e,this.y*e,.6+this.speed/.2,0,2*Math.PI)},t}()),D=F,B=function(){function t(t){this.bkgColor="#151D29",this.starColor="#FFFFFF",this.context=t,this.scale=1,this.stars=[],this.requestId=-1,this.cx=Math.cos(Math.PI/4),this.cy=Math.cos(Math.PI/4),this.initStars(1e3),this.onResized(),this.registerEvents()}return t.prototype.start=function(){this.requestId=requestAnimationFrame(this.render.bind(this))},t.prototype.initStars=function(t){for(var e=0;e<t;e++)this.stars[e]=new D},t.prototype.registerEvents=function(){document.addEventListener("mousemove",this.onMouseMoved.bind(this)),window.addEventListener("resize",this.onResized.bind(this))},t.prototype.unRegisterEvents=function(){document.removeEventListener("mousemove",this.onMouseMoved.bind(this)),window.removeEventListener("resize",this.onResized.bind(this))},t.prototype.onMouseMoved=function(t){var e=Math.atan2(-(this.context.canvas.clientHeight/2+this.context.canvas.clientTop)+t.clientY,-(this.context.canvas.clientWidth/2+this.context.canvas.clientLeft)+t.clientX);this.cx=Math.cos(e),this.cy=Math.sin(e)},t.prototype.onResized=function(){this.context.canvas.width=this.context.canvas.clientWidth,this.context.canvas.height=this.context.canvas.clientHeight,this.scale=this.context.canvas.width>this.context.canvas.height?this.context.canvas.width:this.context.canvas.height},t.prototype.render=function(t){this.context.fillStyle=this.bkgColor,this.context.fillRect(0,0,this.context.canvas.width,this.context.canvas.height),this.context.fillStyle=this.starColor,this.context.beginPath();for(var e=0,n=this.stars;e<n.length;e++){var s=n[e];s.render(this.context,this.scale),s.offset(this.cx,this.cy)}this.context.fill(),requestAnimationFrame(this.render.bind(this))},t}(),G=B,N={name:"Parallax",mounted:function(){var t=this.$refs["parallax-canvas"].getContext("2d");this.par=new G(t),this.par.start()},methods:{}},V=N,H=(n("c515"),Object(h["a"])(V,j,A,!1,null,"54b0d20b",null)),U=H.exports,Q=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container"},[n("AnimatedLogo",{staticClass:"logo"}),n("p",{staticClass:"title"},[t._v("Technologies")]),t._m(0)],1)},K=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"lib-box"},[s("img",{staticClass:"lib-logo",attrs:{src:n("414f")}}),s("img",{staticClass:"lib-logo",attrs:{src:n("9325")}}),s("img",{staticClass:"lib-logo",attrs:{src:n("d243")}}),s("img",{staticClass:"lib-logo",attrs:{src:n("5a2c")}}),s("img",{staticClass:"lib-logo",attrs:{src:n("73c2")}}),s("img",{staticClass:"lib-logo",attrs:{src:n("a2e2")}}),s("img",{staticClass:"lib-logo",attrs:{src:n("d594")}}),s("img",{staticClass:"lib-logo",attrs:{src:n("1b57")}}),s("img",{staticClass:"lib-logo",attrs:{src:n("f694")}})])}],W=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container"},[n("canvas",{ref:"logo-canvas"})])},J=[],X=function(){function t(t){this.color="#FFFFFF",this.scale=1e-5,this.increasing=!0,this.context=t,this.requestId=-1,this.onResized(),this.registerEvents()}return t.prototype.start=function(){this.requestId=requestAnimationFrame(this.render.bind(this))},t.prototype.registerEvents=function(){window.addEventListener("resize",this.onResized.bind(this))},t.prototype.unRegisterEvents=function(){window.removeEventListener("resize",this.onResized.bind(this))},t.prototype.onResized=function(){this.context.canvas.width=2*this.context.canvas.clientWidth,this.context.canvas.height=2*this.context.canvas.clientHeight},t.prototype.cubicEaseInOut=function(t,e,n,s){return t/=s/2,t<1?n/2*t*t*t+e:(t-=2,n/2*(t*t*t+2)+e)},t.prototype.render=function(t){var e=3e3,n=this.cubicEaseInOut(t%e,0,1,e);this.scale=t%(2*e)>e?n:1-n,this.context.clearRect(0,0,this.context.canvas.width,this.context.canvas.height);var s=this.context.canvas.width/2,i=this.context.canvas.height/2;this.context.fillStyle=this.color,this.context.strokeStyle=this.color,this.context.lineWidth=20*Math.log(60*this.scale+10),this.context.beginPath(),this.context.ellipse(s,i,.4*i*this.scale,.8*i,0,.25*Math.PI,.75*Math.PI,!0),this.context.stroke(),this.context.beginPath(),this.context.ellipse(s,i-.2*i,.1*i,.1*i,0,0,2*Math.PI,!0),this.context.fill(),requestAnimationFrame(this.render.bind(this))},t}(),Y=X,Z={name:"AnimatedLogo",mounted:function(){var t=this.$refs["logo-canvas"].getContext("2d");this.logo=new Y(t),this.logo.start()},methods:{}},tt=Z,et=(n("70c6"),Object(h["a"])(tt,W,J,!1,null,"182262f6",null)),nt=et.exports,st={name:"AboutContent",components:{AnimatedLogo:nt}},it=st,rt=(n("f9f6"),Object(h["a"])(it,Q,K,!1,null,"63589830",null)),at=rt.exports,ot={name:"About",components:{Parallax:U,AboutContent:at},data:function(){return{}},methods:{}},ct=ot,ut=(n("b512"),Object(h["a"])(ct,$,q,!1,null,"35260a96",null)),lt=ut.exports,ht=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container"},[n("Parallax",{staticClass:"background"}),n("div",{staticClass:"box"},[n("AccountPage")],1)],1)},dt=[],ft=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container"},[n("p",{staticClass:"status"},[t._v(t._s(t.status))]),n("img",{staticClass:"avatar",attrs:{src:""+t.gravatar}}),n("p",{staticClass:"name"},[t._v(t._s(t.name))]),n("p",{staticClass:"email"},[t._v("("+t._s(t.email)+")")]),n("p",{staticClass:"score"},[t._v("- Score "+t._s(t.score)+" -")])])},pt=[],mt=n("6821f"),vt=n.n(mt),gt={name:"AccountPage",data:function(){return{account:null,status:"",gravatar:"",name:"",email:"",score:0}},mounted:function(){var t=Object(R["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.getAccount();case 2:if(this.account=t.sent,this.account){t.next=6;break}return status="Unable to retrieve account.",t.abrupt("return");case 6:return this.name=this.account.username.toUpperCase(),this.email=this.account.email,this.score=this.account.score,t.next=11,this.getGravatar();case 11:this.gravatar=t.sent;case 12:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),methods:{getAccount:function(){var t=Object(R["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!this.account){t.next=2;break}return t.abrupt("return",this.account);case 2:return t.prev=2,t.next=5,this.$store.state.client.requestAccountInfo();case 5:return t.abrupt("return",t.sent);case 9:t.prev=9,t.t0=t["catch"](2),console.log("[Account] Error while getting account info.");case 12:case"end":return t.stop()}}),t,this,[[2,9]])})));function e(){return t.apply(this,arguments)}return e}(),getGravatar:function(){var t=Object(R["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return","https://gravatar.com/avatar/".concat(vt()(this.account.avatar.toLowerCase()),"?size=256"));case 1:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()}},bt=gt,xt=(n("b448"),Object(h["a"])(bt,ft,pt,!1,null,"18c16010",null)),yt=xt.exports,Ct={name:"Account",components:{Parallax:U,AccountPage:yt},data:function(){return{}},methods:{}},wt=Ct,Rt=(n("2c26"),Object(h["a"])(wt,ht,dt,!1,null,"33ff1a6f",null)),kt=Rt.exports,_t=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container"},[n("Parallax",{staticClass:"background"}),n("GameScreen",{staticClass:"screen"}),n("GameMenu",{staticClass:"box",class:{hidden:t.menuHidden}})],1)},Pt=[],Et=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container"},[t._v("\n  Hello\n")])},Tt=[],Lt={name:"GameMenu"},Mt=Lt,It=(n("62f4"),Object(h["a"])(Mt,Et,Tt,!1,null,"20953940",null)),zt=It.exports,Ot=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"container",staticClass:"container"},[n("canvas",{ref:"screen",class:{"width-bias":t.widthBias,"height-bias":!t.widthBias}})])},St=[],$t=(n("ac6a"),n("5df3"),n("f400"),n("9ab4"));(function(t){t[t["shieldTime"]=600]="shieldTime",t[t["rechargeTime"]=500]="rechargeTime",t[t["size"]=50]="size",t[t["speed"]=13]="speed"})(s||(s={}));var qt=function(){function t(t){this.upPressed=!1,this.downPressed=!1,this.leftPressed=!1,this.rightPressed=!1,this.spacePressed=!1,this.entity={name:t,x:100,y:100,rechargeTime:0,shieldTime:0,blockedThisShield:!1}}return t.prototype.registerEvents=function(){document.addEventListener("keydown",this.onKeyDown.bind(this)),document.addEventListener("keyup",this.onKeyUp.bind(this))},t.prototype.unRegisterEvents=function(){document.removeEventListener("keydown",this.onKeyDown.bind(this)),document.removeEventListener("keyup",this.onKeyUp.bind(this))},t.prototype.onKeyDown=function(t){65===t.keyCode||37===t.keyCode?this.leftPressed=!0:87===t.keyCode||38===t.keyCode?this.upPressed=!0:83===t.keyCode||40===t.keyCode?this.downPressed=!0:68===t.keyCode||39===t.keyCode?this.rightPressed=!0:32===t.keyCode&&(this.spacePressed=!0)},t.prototype.onKeyUp=function(t){65===t.keyCode||37===t.keyCode?this.leftPressed=!1:87===t.keyCode||38===t.keyCode?this.upPressed=!1:83===t.keyCode||40===t.keyCode?this.downPressed=!1:68===t.keyCode||39===t.keyCode?this.rightPressed=!1:32===t.keyCode&&(this.spacePressed=!1)},t.prototype.update=function(t){this.leftPressed&&(this.entity.x+=-s.speed),this.rightPressed&&(this.entity.x+=s.speed),this.upPressed&&(this.entity.y+=-s.speed),this.downPressed&&(this.entity.y+=s.speed),this.entity.shieldTime>0?this.entity.shieldTime-=t:this.entity.rechargeTime>0?this.entity.rechargeTime-=t:this.spacePressed&&(this.entity.shieldTime=s.shieldTime,this.entity.rechargeTime=s.rechargeTime),this.entity.x>1920-s.size/2?this.entity.x=1920-s.size/2:this.entity.x<0+s.size/2&&(this.entity.x=0+s.size/2),this.entity.y>1080-s.size/2?this.entity.y=1080-s.size/2:this.entity.y<0+s.size/2&&(this.entity.y=0+s.size/2)},t}(),jt=qt,At=function(){function t(){}return t.render=function(t,e){e.shieldTime<=0&&(t.fillStyle="#ee2",t.moveTo(e.x-25,e.y-25),t.rect(e.x-25,e.y-25,50,50))},t.renderShield=function(t,e){e.shieldTime>0&&(t.fillStyle="#48d",t.moveTo(e.x,e.y),t.ellipse(e.x,e.y,30,30,0,0,2*Math.PI))},t.renderName=function(t,e){t.fillStyle="#ccc",t.textAlign="center",t.font="16px Montserrat",t.fillText(e.name,e.x,e.y+s.size)},t.renderRecharge=function(t,e){e.rechargeTime>0&&e.shieldTime<=0&&(t.beginPath(),t.strokeStyle="#cccccc",t.lineWidth=5,t.arc(e.x,e.y,35,0,2*Math.PI*(e.rechargeTime/s.rechargeTime)),t.stroke())},t.renderHazard=function(t,e){t.fillStyle="#d48",t.moveTo(e.x,e.y),t.ellipse(e.x,e.y,e.size,e.size,0,0,2*Math.PI)},t.renderInfo=function(t,e,n,s){t.fillStyle="#ccc",t.textAlign="center",t.font="48px Montserrat",t.fillText("Room "+e,960,64),t.font="24px Montserrat",t.fillText("Score "+n,960,96),s&&(t.fillStyle="#a22",t.textAlign="center",t.font="20px Montserrat",t.fillText(""+s,960,128))},t}(),Ft=At,Dt=n("faa1"),Bt=function(t){function e(e,n,s){var i=t.call(this)||this;return i.context=e,i.client=n,i.player=new jt(s.username),i.entities=new Map,i.hazard={x:960,y:540,size:70},i.requestId=-1,i.lastTime=0,i.accumTime=0,i.stepTime=1e3/60,i.score=0,i.roomId="-",i.status="",i}return Object($t["a"])(e,t),e.prototype.start=function(){this.context.canvas.width=1920,this.context.canvas.height=1080,this.registerEvents()},e.prototype.close=function(){this.unRegisterEvents()},e.prototype.registerEvents=function(){var t=this;this.player.registerEvents(),this.requestId=requestAnimationFrame(this.tick.bind(this)),this.client.subscribeToRoom(this.onServerTick.bind(this),this.onClientDied.bind(this)).then((function(e){t.roomId=e}))},e.prototype.unRegisterEvents=function(){this.client.unSubscribeToRoom(this.player.entity.name,Math.floor(this.score),this.onServerTick.bind(this),this.onClientDied.bind(this)),cancelAnimationFrame(this.requestId),this.player.unRegisterEvents()},e.prototype.onServerTick=function(t,e){this.entities=new Map(e),this.hazard=t,this.score+=1/30},e.prototype.onClientDied=function(t){t===this.player.entity.name?this.emit("close"):this.status="Player "+t+" died!"},e.prototype.tick=function(t){var e=t-this.lastTime;if(this.lastTime=t,this.accumTime+=e,this.accumTime>this.stepTime){while(this.accumTime>this.stepTime)this.update(this.stepTime),this.accumTime-=this.stepTime;this.client.sendClientTick(this.player.entity)}this.render(),this.requestId=requestAnimationFrame(this.tick.bind(this))},e.prototype.update=function(t){this.player.update(t)},e.prototype.render=function(){var t=this;this.context.clearRect(0,0,this.context.canvas.width,this.context.canvas.height),this.context.beginPath(),this.entities.forEach((function(e,n){return Ft.render(t.context,e)})),this.context.fill(),this.context.beginPath(),this.entities.forEach((function(e,n){return Ft.renderShield(t.context,e)})),this.context.fill(),this.context.beginPath(),this.entities.forEach((function(e,n){return Ft.renderRecharge(t.context,e)})),this.context.stroke(),this.context.beginPath(),Ft.renderHazard(this.context,this.hazard),this.context.fill(),this.entities.forEach((function(e,n){return Ft.renderName(t.context,e)})),Ft.renderInfo(this.context,this.roomId,Math.floor(this.score),this.status)},e}(Dt["EventEmitter"]),Gt=Bt,Nt={name:"GameScreen",data:function(){return{game:null,widthBias:!1}},mounted:function(){var t=this;window.addEventListener("resize",this.onResize);var e=this.$store.state.client;e.requestAccountInfo().then((function(n){var s=t.$refs["screen"].getContext("2d",{alpha:!1});t.game=new Gt(s,e,n),t.game.once("close",t.onShuttingDown),t.game.start()})),this.onResize(null)},beforeDestroy:function(){console.log("before destroy"),window.removeEventListener("resize",this.onResize),this.game&&this.game.close()},beforeRouteLeave:function(t,e,n){console.log("before route leave"),f,this.game&&this.game.close(),n()},methods:{onResize:function(t){var e=this.$refs["container"].clientWidth,n=this.$refs["container"].clientHeight;this.widthBias=n>e/16*9},onShuttingDown:function(){console.log("on shutting down"),this.$router.push("/")}}},Vt=Nt,Ht=(n("7201"),Object(h["a"])(Vt,Ot,St,!1,null,"140c682a",null)),Ut=Ht.exports,Qt={name:"Game",components:{Parallax:U,GameMenu:zt,GameScreen:Ut},data:function(){return{menuHidden:!0}},methods:{}},Kt=Qt,Wt=(n("587b"),Object(h["a"])(Kt,_t,Pt,!1,null,"43da1942",null)),Jt=Wt.exports,Xt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container"},[n("Parallax"),n("div",{staticClass:"right"},[n("AnimatedLogo",{staticClass:"logo"})],1),n("div",{staticClass:"left"},[n("Menu")],1)],1)},Yt=[],Zt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"menu-box"},[n("div",{staticClass:"title"},[t._v("Aphelion")]),n("div",{staticClass:"menu-item",on:{click:function(e){return t.onClick("game")}}},[n("p",[t._v("Play")])]),n("div",{staticClass:"menu-item",on:{click:function(e){return t.onClick("account")}}},[n("p",[t._v("Account")])]),n("div",{staticClass:"menu-item",on:{click:function(e){return t.onClick("leaderboard")}}},[n("p",[t._v("Leaderboards")])])])},te=[],ee={name:"Menu",methods:{onClick:function(t){this.$router.push("/".concat(t))}}},ne=ee,se=(n("255d"),Object(h["a"])(ne,Zt,te,!1,null,"4227f686",null)),ie=se.exports,re={name:"Home",components:{Menu:ie,Parallax:U,AnimatedLogo:nt}},ae=re,oe=(n("65a3"),Object(h["a"])(ae,Xt,Yt,!1,null,"34c9e606",null)),ce=oe.exports,ue=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container"},[n("Parallax",{staticClass:"background"}),n("div",{staticClass:"box"},[n("Board",{attrs:{entries:t.entries}})],1)],1)},le=[],he=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"title"},[t._v("Leaderboards")]),n("div",{staticClass:"entry-container"},[n("div",{staticClass:"entry-header"}),t._l(t.entries,(function(t){return n("div",{key:t.id},[n("BoardEntry",{attrs:{entry:t}})],1)}))],2)])},de=[],fe=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"title"},[t._v("\n  "+t._s(t.title)+"\n")])},pe=[],me={name:"Header",props:["title"]},ve=me,ge=(n("aae8"),Object(h["a"])(ve,fe,pe,!1,null,"f0047f30",null)),be=ge.exports,xe=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"board-entry"},[n("img",{staticClass:"avatar",attrs:{src:""+t.gravatar}}),n("p",{staticClass:"name"},[t._v("\n    "+t._s(t.entry.username)+"\n  ")]),n("p",{staticClass:"score"},[t._v("\n    "+t._s(t.entry.score)+"\n  ")])])},ye=[],Ce={name:"BoardEntry",props:["entry"],data:function(){return{gravatar:"https://gravatar.com/avatar/".concat(vt()(this.entry.avatar.toLowerCase()))}}},we=Ce,Re=(n("d8ed"),Object(h["a"])(we,xe,ye,!1,null,"0cd14c66",null)),ke=Re.exports,_e={name:"Board",components:{Header:be,BoardEntry:ke},props:["entries"]},Pe=_e,Ee=(n("1954"),Object(h["a"])(Pe,he,de,!1,null,"7af213b8",null)),Te=Ee.exports,Le={name:"Leaderboard",components:{Board:Te,Parallax:U},mounted:function(){var t=Object(R["a"])(regeneratorRuntime.mark((function t(){var e,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=this.$store.state.client,t.prev=1,t.next=4,e.requestLeaderBoards();case 4:n=t.sent,console.log("[Leaderboard] Got leaderboard request back from server."),this.entries=n,t.next=11;break;case 9:t.prev=9,t.t0=t["catch"](1);case 11:case"end":return t.stop()}}),t,this,[[1,9]])})));function e(){return t.apply(this,arguments)}return e}(),data:function(){return{entries:[]}}},Me=Le,Ie=(n("c92b"),Object(h["a"])(Me,ue,le,!1,null,"8e0829fe",null)),ze=Ie.exports,Oe=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"root"},[n("Parallax",{staticClass:"background"}),n("div",{staticClass:"box"},[n("RegisterForm",{class:{hidden:!t.isRegistering},attrs:{id:"register"},on:{"switch-form":t.switchForm}}),n("LoginForm",{class:{hidden:t.isRegistering},attrs:{id:"login"},on:{"switch-form":t.switchForm}})],1)],1)},Se=[],$e=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"form-container"},[s("img",{staticClass:"logo",attrs:{src:n("4822"),alt:"Logo"}}),s("br"),s("p",{staticClass:"title"},[t._v("Register")]),s("br"),s("form",{attrs:{id:"register-form"},on:{submit:t.handleSubmit}},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.username,expression:"username"}],attrs:{type:"text",placeholder:"Username"},domProps:{value:t.username},on:{input:function(e){e.target.composing||(t.username=e.target.value)}}}),s("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],attrs:{type:"text",placeholder:"Email"},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value)}}}),s("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],attrs:{type:"password",placeholder:"Password"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}}),s("input",{directives:[{name:"model",rawName:"v-model",value:t.repassword,expression:"repassword"}],attrs:{type:"password",placeholder:"Retype Password"},domProps:{value:t.repassword},on:{input:function(e){e.target.composing||(t.repassword=e.target.value)}}}),s("input",{attrs:{disabled:t.disabled,type:"submit",value:"Submit"}}),s("p",{staticClass:"status"},[t._v(t._s(t.status))])]),s("p",{staticClass:"message"},[t._v("\n    Already registered?\n    "),s("a",{attrs:{id:"sign-in"},on:{click:function(e){return t.$emit("switch-form")}}},[t._v("Login")])])])},qe=[],je=function(){function t(){}return t.VerifyEmail=function(t){return/(?:[a-z0-9!#$%&'*+\/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+\/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])/.test(t)},t.VerifyUsername=function(t){return/^(((?=.*[a-z])))/.test(t)},t.VerifyPassword=function(t){return/^(((?=.*[a-z])))(?=.{6,})/.test(t)},t}(),Ae=je,Fe={name:"RegisterForm",data:function(){return{username:"",password:"",repassword:"",email:"",disabled:!1,status:""}},methods:{handleSubmit:function(){var t=Object(R["a"])(regeneratorRuntime.mark((function t(e){var n,s,i,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.preventDefault(),this.disabled=!0,console.log("[Register] Got register submit."),n=Ae.VerifyEmail(this.email),s=Ae.VerifyUsername(this.username),i=Ae.VerifyPassword(this.password),!(n&&s&&i&&this.password===this.repassword)){t.next=14;break}return console.log("[Register] Validated."),t.next=10,this.$store.state.client.requestRegister(this.username,this.email,this.password);case 10:r=t.sent,r?(console.log("[Register] Server accepted registration."),this.$store.commit("authenticate"),this.$router.push("/")):(console.log("[Register] Registration rejected by server."),this.disabled=!1,this.status="Credentials rejected by server."),t.next=17;break;case 14:console.log("[Register] Failed to validate."),this.disabled=!1,s?n?i?this.password!==this.repassword&&(this.status="Passwords must match"):this.status="Needs a valid password.":this.status="Needs a valid email address.":this.status="Needs a valid username.";case 17:return t.abrupt("return",!1);case 18:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()}},De=Fe,Be=(n("e5c4"),Object(h["a"])(De,$e,qe,!1,null,"9c404894",null)),Ge=Be.exports,Ne=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"form-container"},[s("img",{staticClass:"logo",attrs:{src:n("4822"),alt:"Logo"}}),s("br"),s("p",{staticClass:"title"},[t._v("Login")]),s("br"),s("form",{attrs:{novalidate:"true"},on:{submit:t.handleSubmit}},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.humanId,expression:"humanId"}],attrs:{type:"text",placeholder:"Username or Email"},domProps:{value:t.humanId},on:{input:function(e){e.target.composing||(t.humanId=e.target.value)}}}),s("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],attrs:{type:"password",placeholder:"Password"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}}),s("input",{attrs:{disabled:t.disabled,type:"submit",value:"Submit"}}),s("p",{staticClass:"status"},[t._v(t._s(t.status))])]),s("p",{staticClass:"message"},[t._v(" Need an account? "),s("a",{attrs:{id:"login"},on:{click:function(e){return t.$emit("switch-form")}}},[t._v("Register")])])])},Ve=[],He={name:"LoginForm",data:function(){return{humanId:"",password:"",disabled:!1,status:""}},methods:{handleSubmit:function(){var t=Object(R["a"])(regeneratorRuntime.mark((function t(e){var n,s,i,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.preventDefault(),this.disabled=!0,console.log("[Login] Got login submit. ".concat(this.humanId," ").concat(this.password)),n=Ae.VerifyEmail(this.humanId),s=Ae.VerifyUsername(this.humanId),i=Ae.VerifyPassword(this.password),!n&&!s||!i){t.next=14;break}return console.log("[Login] Validated."),t.next=10,this.$store.state.client.requestLogin(this.humanId,n,this.password);case 10:r=t.sent,r?(console.log("[Login] Server accepted login."),this.$store.commit("authenticate"),this.$router.push("/")):(console.log("[Login] Failed to login."),this.disabled=!1,this.status="Bad login credentials."),t.next=18;break;case 14:console.log("[Login] Failed to validate."),this.disabled=!1,n||s||(this.status="Must enter a valid username or email."),this.password||(this.status="Invalid login credentials.");case 18:return t.abrupt("return",!1);case 19:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()}},Ue=He,Qe=(n("d18a"),Object(h["a"])(Ue,Ne,Ve,!1,null,"6fea2040",null)),Ke=Qe.exports,We={name:"Login",components:{Parallax:U,RegisterForm:Ge,LoginForm:Ke},data:function(){return{isRegistering:!1}},methods:{switchForm:function(){this.isRegistering=!this.isRegistering}}},Je=We,Xe=(n("e464"),Object(h["a"])(Je,Oe,Se,!1,null,"139a2c79",null)),Ye=Xe.exports;i["a"].use(S["a"]);var Ze,tn=new S["a"]({routes:[{path:"/about",name:"about",component:lt},{path:"/account",name:"account",component:kt},{path:"/game",name:"game",component:Jt},{path:"/",name:"home",component:ce},{path:"/leaderboard",name:"leaderboard",component:ze},{path:"/login",name:"login",component:Ye}]}),en=n("2f62"),nn=n("5385"),sn=n("8055"),rn=n.n(sn),an=n("11c1"),on=n.n(an);(function(t){t["IdRequest"]="ID_REQ",t["RegisterRequest"]="REG_REQ",t["LoginRequest"]="LGN_REQ",t["AccountInfoRequest"]="ACC_REQ",t["LeaderboardRequest"]="LED_REQ",t["RoomRequest"]="ROO_REQ",t["LeaveRoomRequest"]="LEV_REQ",t["ClientTick"]="CLI_TIC",t["ServerTick"]="SRV_TIC",t["ClientDied"]="CLI_DED"})(Ze||(Ze={}));var cn=Ze,un=function(){function t(){var t=this;this.id=on.a.v4(),this.connected=!1;var e={autoConnect:!1};this.socket=rn()("/",e),this.socket.on("connect",this.onConnected.bind(this)),this.socket.on(cn.IdRequest,(function(e){e(t.id)})),this.socket.connect(),this.roomId=""}return t.prototype.onConnected=function(){this.connected=!0},t.prototype.isConnected=function(){return this.connected},t.prototype.requestLogin=function(t,e,n){return this.createRequest(cn.LoginRequest,t,e,n)},t.prototype.requestRegister=function(t,e,n){return this.createRequest(cn.RegisterRequest,t,e,n)},t.prototype.requestLeaderBoards=function(){return this.createRequest(cn.LeaderboardRequest)},t.prototype.requestAccountInfo=function(){return this.createRequest(cn.AccountInfoRequest)},t.prototype.requestRoom=function(){return this.createRequest(cn.RoomRequest)},t.prototype.createRequest=function(t){for(var e=this,n=[],s=1;s<arguments.length;s++)n[s-1]=arguments[s];var i=new Promise((function(s,i){var r;try{(r=e.socket).emit.apply(r,Object($t["b"])([t,e.id],n,[function(t){s(t)}]))}catch(a){i(a.message)}}));return i},t.prototype.subscribeToRoom=function(t,e){var n=this;return this.requestRoom().then((function(s){return console.log("[ Client ] Subscribed to room "+s+"."),n.socket.on(cn.ServerTick,t),n.socket.on(cn.ClientDied,e),s}))},t.prototype.unSubscribeToRoom=function(t,e,n,s){this.socket.emit(cn.LeaveRoomRequest,this.id,t,e),this.socket.off(cn.ServerTick,n),this.socket.on(cn.ClientDied,s)},t.prototype.sendClientTick=function(t){this.socket.emit(cn.ClientTick,this.id,t)},t}(),ln=un;i["a"].use(en["a"]),i["a"].use(nn["a"]);var hn={client:new ln,authenticated:!1},dn=new en["a"].Store({state:hn,mutations:{authenticate:function(t){t.authenticated=!0}},actions:{}});i["a"].config.productionTip=!1,tn.beforeEach((function(t,e,n){"login"===t.name||"about"===t.name||dn.state.authenticated?"login"===t.name&&dn.state.authenticated?n("/"):n():n("/login")})),new i["a"]({router:tn,store:dn,render:function(t){return t(O)}}).$mount("#app")},ceee:function(t,e,n){},d18a:function(t,e,n){"use strict";var s=n("bf86"),i=n.n(s);i.a},d243:function(t,e,n){t.exports=n.p+"assets/img/ts.ddc7d8a1.png"},d548:function(t,e,n){},d594:function(t,e,n){t.exports=n.p+"assets/img/socket-io.25500dcd.png"},d8ed:function(t,e,n){"use strict";var s=n("3063"),i=n.n(s);i.a},d918:function(t,e,n){},e2d3:function(t,e,n){t.exports=n.p+"assets/img/MusicOn.87077e62.svg"},e464:function(t,e,n){"use strict";var s=n("ea61"),i=n.n(s);i.a},e5c4:function(t,e,n){"use strict";var s=n("31a8"),i=n.n(s);i.a},ea61:function(t,e,n){},ebfb:function(t,e,n){},f694:function(t,e,n){t.exports=n.p+"assets/img/bcrypt.b559365d.png"},f9f6:function(t,e,n){"use strict";var s=n("b046"),i=n.n(s);i.a}});
//# sourceMappingURL=app.98f747a9.js.map